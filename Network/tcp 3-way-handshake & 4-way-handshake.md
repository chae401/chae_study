# [TCP] 3 way handshake & 4 way handshake
> μ—°κ²°μ„ μ„±λ¦¬ν•κ³  ν•΄μ ν•λ” κ³Όμ •μ„ λ§ν•λ‹¤.

## π3 way handshake - μ—°κ²° μ„±λ¦½
> TCP 3 way handshakeλ” TCP/IP ν”„λ΅ν† μ½μ„ μ΄μ©ν•΄μ„ ν†µμ‹ μ„ ν•λ” μ‘μ©ν”„λ΅κ·Έλ¨μ΄ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•κΈ° μ „μ— 
>  λ¨Όμ € μ •ν™•ν• μ „μ†΅μ„ λ³΄μ¥ν•κΈ° μ„ν•΄ μƒλ€λ°© μ»΄ν“¨ν„°μ™€ μ‚¬μ „μ— μ„Έμ…μ„ μλ¦½ν•λ” κ³Όμ •μ„ μλ―Έν•λ‹¤.

![](https://user-images.githubusercontent.com/83829352/267882095-4aec5a07-448a-4ef9-bf5d-b5c3ee73efea.png)
1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² SYN ν¨ν‚·μ„ λ³΄λƒ„ (sequence : x)
2. μ„λ²„κ°€ SYN(x)μ„ λ°›κ³ , ν΄λΌμ΄μ–ΈνΈλ΅ λ°›μ•λ‹¤λ” μ‹ νΈμΈ ACKμ™€ SYN ν¨ν‚·μ„ λ³΄λƒ„ (sequence : y, ACK : x+1)
3. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ μ‘λ‹µμ€ ACK(x+1)μ™€ SYN(y) ν¨ν‚·μ„ λ°›κ³ , ACK(y+1)μ„ μ„λ²„λ΅ λ³΄λƒ„

μ΄λ ‡κ² 3λ²μ ν†µμ‹ μ΄ μ™„λ£λλ©΄ μ—°κ²°μ΄ μ„±λ¦½λλ‹¤.
* SYN(Synchronize sequence numbers)
* ACK(acknowledgment)

<br/>

## π4 way handshake - μ—°κ²° ν•΄μ 
μ—°κ²° μ„±λ¦½ ν›„, λ¨λ“  ν†µμ‹ μ΄ λλ‚¬λ‹¤λ©΄ ν•΄μ ν•΄μ•Ό ν•λ‹¤.
![](https://user-images.githubusercontent.com/83829352/267882196-b8ce414a-749a-4358-b38d-c479230606c3.png)

1. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ—κ² μ—°κ²°μ„ μΆ…λ£ν•λ‹¤λ” FIN ν”λκ·Έλ¥Ό λ³΄λ‚Έλ‹¤.
2. μ„λ²„λ” FINμ„ λ°›κ³ , ν™•μΈν–λ‹¤λ” ACKλ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚Έλ‹¤.(μ΄λ• λ¨λ“  λ°μ΄ν„°λ¥Ό λ³΄λ‚΄κΈ° μ„ν•΄ CLOSE_WAIT μƒνƒκ°€ λλ‹¤.)
3. λ°μ΄ν„°λ¥Ό λ¨λ‘ λ³΄λƒλ‹¤λ©΄, μ—°κ²°μ΄ μΆ…λ£λμ—λ‹¤λ” FIN ν”λκ·Έλ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚Έλ‹¤.
4. ν΄λΌμ΄μ–ΈνΈλ” FINμ„ λ°›κ³ , ν™•μΈν–λ‹¤λ” ACKλ¥Ό μ„λ²„μ—κ² λ³΄λ‚Έλ‹¤. (μ•„μ§ μ„λ²„λ΅λ¶€ν„° λ°›μ§€ λ»ν• λ°μ΄ν„°κ°€ μμ„ μ μμΌλ―€λ΅ TIME_WAITμ„ ν†µν•΄ κΈ°λ‹¤λ¦°λ‹¤.)
	* μ„λ²„λ” ACKλ¥Ό λ°›μ€ μ΄ν›„ μ†μΌ“μ„ λ‹«λ”λ‹¤(Closed)
	* TIME_WAIT μ‹κ°„μ΄ λλ‚λ©΄ ν΄λΌμ΄μ–ΈνΈλ„ λ‹«λ”λ‹¤(Closed)

μ΄λ ‡κ² 4λ²μ ν†µμ‹ μ΄ μ™„λ£λλ©΄ μ—°κ²°μ΄ ν•΄μ λλ‹¤.


[μ°Έκ³ μλ£](https://bangu4.tistory.com/74)
