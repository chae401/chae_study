## 🖍 프로세스
### 프로세스의 개념
> `프로세스(Process)`는 일반적으로 '실행 중인 프로그램(Program)'을 말한다.


- Program?? Process??
![image](https://github.com/chae401/chae_study/assets/83829352/7981a613-c003-45be-90e1-4aa06cfafb95)

	- `프로그램`은 컴파일한 코드와 초기화 전역변수, 문자열과 문자열 상수 등 정적 데이터를 포함하는 정적인 개체이다.
	 - 반면에 `프로세스`는 스택, 힙 데이터와 코드 영역으로 구성된 메모리 구조와 프로그램 카운터나 레지스터처럼 **현재 어떤 자원을 사용하는지 관련 정보가 들어 있는 동적인 개체**이다.
- 스케줄링의 대상이 되는 작업(Task)와 같은 의미로 쓰인다.
- 프로세스 내부에는 최소 하나의 스레드(thread)를 가지고 있는데, 실제로는 스레드(thread) 단위로 스케줄링을 한다.
- 하드디스크에 있는 프로그램을 실행하면, 실행을 위해서 **메모리 할당**이 이루어지고, 할당된 메모리 공간으로 바이너리 코드가 올라가게 된다. 이 순간부터 **프로세스**라 불린다.

### 프로세스의 상태
> 프로세스의 현재 활동으로 정의한다.
- 실행
- 비실행
- (준비, 실행, 대기, ...)

### 프로세스 제어 블록
- `PCB(Process Control Block)` 은 특정 프로세스 정보를 저장하는 데이터 블록이나 레코드이다.
- 프로세스가 생성되면 메모리에 프로세스 제어 블록을 생성하고, 프로세스가 실행을 종료하면 해당 프로세스 제어 블록도 삭제한다.

### 프로세스 문맥 교환
- 인터럽트나 시스템 호출 등으로 실행 중인 프로세스의 제어를 다른 프로세스에 넘겨 실행 상태가 되도록 하는 것이다.

### 프로세스의 구조
- 프로세스는 실행 중에 새로운 프로세스를 생성할 수 있는데, 이때 새로 생성하는 프로세스는 부모 프로세스(parent process)이고, 생성되는 프로세스는 자식 프로세스(child process)이다.
- 프로세스 생성 순서가 저장되고 부모-자식 관계를 유지하여 계층적으로 생성된다.

### 프로세스의 생성
- 프로세스를 생성하면 운영체제는 해당 프로세스에서 프로세스 제어 블록을 만들어 주소 공간을 할당한다.
- 일괄 처리 환경에서는 준비 큐에 작업이 도착할 때 프로세스를 생성하고, 대화형 환경에서는 새로운 사용자가 로그온할 때 프로세스를 생성한다.

### 프로세스의 종료
- 프로세스가 마지막 명령을 실행하면 종료한다.
- 일괄 처리 환경에서는 작업 종료를 의미하는 신호로 인터럽트를 발생하거나 시스템 호출로 중단 명령을 전달하여 프로세스를 종료한다.
- 대화형 환경에서는 사용자가 로그오프하거나 터미널을 닫으면 프로세스를 종료한다.
- 오류로 프로세스를 종료할 수도 있다.

### 프로세스의 제거
- 프로세스 제거는 프로세스를 파괴하는 것이다.
- 프로세스를 제거하면 사용하던 자원을 시스템에 돌려주고, 해당 프로세스는 시스템 리스트나 테이블에서 사라져 프로세스 제어 블록을 회수한다.
- 자식 프로세스는 부모 프로세스를 제거하면 자동으로 제거된다.

### 프로세스의 중단과 재시작
- 유휴시간 문제를 해결하기 위해 프로세스 중단(일시정지)를 이용한다.
- 중단 원인을 제거한 후 다시 실행 = 재시작

### 프로세스이 우선순위 변경
- 프로세스 제어 블록의 우선순위 값을 변경할 수 있다.
- 프로세스 스케줄러는 준비 리스트의 우선 순위를 이용하여 프로세스를 처리한다.

### 프로세스 문맥 교환(Context Switch)
> 이전 프로세스의 상태 레지스터 내용을 보관하고,
> 다른 프로세스의 레지스터를 적재하여 프로세스를 교환하는 일련의 과정
- 하나의 프로세스가 CPU를 사용 중인 상태에서 다른 프로세스가 CPU를 사용하도록 하기 위해,
- 이전의 프로세스이 상태(문맥)을 보관하고 새로운 프로세스의 상태를 적재하는 작업
- 한 프로세스의 문맥은 그 프로세스의 프로세스 제어 블록에 기록되어 있다.

## 🖍 스레드

### 스레드의 개념
> 프로세스는 두 가지 특성인 자원과 제어로 구분할 수 있는데, 
> 제어만 분리한 실행 단위를 스레드라 한다.

- 프로그램 카운터(PC), 스택 포인터(SP) 등을 비롯한 스레드 실행 환경 정보(문맥 정보), 지역 데이터 스택을 독립적으로 가진다.
- 코드, 전역 데이터, 힙을 다른 스레드와 공유한다.

### 단일 스레드와 다중 스레드
- 다중 스레드
	- 스레드가 여러개
	- 프로그램 하나를 여러 실행 단위로 쪼개어 실행 like 다중 처리(multi processing)
	- 동일 프로세스의 스레드는 자월을 공유하므로 자원 생성과 관리의 중복성을 최소화하여 실행 능력을 향상시킬 수 있다.
- 단일 스레드
	- 스레드가 하나

### 스레드 상태
- 준비, 실행, 대기, 종료 상태로 구분
- 한 프로세스에 있는 스레드는 순차적으로 실행하며, 해당 스레드의 정보를 저장하는 레지스터와 스택이 있다.

### 스레드 제어 블록
- 프로세스 제어 블록과 같은 레지스터 값, 프로그램 카운터, 스택 포인터, 스케줄링 상태 외에도 스레드 ID와 해당 스레드를 포함하는 프로세스 포인터 같은 특정 값 저장

### 스레드의 구현
- 사용자 수준 스레드
	- 스레드 라이브러리를 이용해 작동
	- 사용자 영역에 있는 스레드 여러 개가 커널 영역의 스레드 한 개에 다대일(n:1) 매핑된다.
- 커널 수준 스레드
	- 커널(운영체제)에서 지원
	- 사용자 영역 스레드별로 커널 영역 스레드가 일대일(1:1) 매핑된다.
- 혼합형 스레드
	- 사용자 수준 스레드 + 커널 수준 스레드
	- 상요자 영역에서 스레드를 생성하고, 다수의 사용자 수준 스레드에 다수의 커널 스레드가 다대다(n:m)로 매핑된다.
